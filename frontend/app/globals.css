@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== CSS Custom Properties (Design Tokens) ===== */
@layer base {
  :root {
    /* Colors - Light Mode */
    --color-primary: #0EA5E9;
    --color-primary-light: #E0F2FE;
    --color-primary-dark: #0284C7;

    --color-secondary: #6366F1;
    --color-success: #22C55E;
    --color-warning: #F59E0B;
    --color-error: #EF4444;
    --color-info: #6366F1;

    --color-text: #111827;
    --color-text-secondary: #6B7280;
    --color-text-muted: #9CA3AF;

    --color-background: #FFFFFF;
    --color-background-secondary: #F9FAFB;
    --color-background-tertiary: #F3F4F6;

    --color-border: #E5E7EB;
    --color-border-light: #F3F4F6;

    /* Typography */
    --font-family-base: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif;
    --font-size-base: 16px;
    --font-weight-regular: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;

    /* Spacing */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    --spacing-2xl: 48px;

    /* Radius */
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-full: 9999px;

    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);

    /* Transitions */
    --transition-fast: 150ms;
    --transition-normal: 300ms;
    --transition-slow: 500ms;
  }

  /* Dark Mode */
  @media (prefers-color-scheme: dark) {
    :root {
      --color-text: #F9FAFB;
      --color-text-secondary: #D1D5DB;
      --color-text-muted: #9CA3AF;

      --color-background: #111827;
      --color-background-secondary: #1F2937;
      --color-background-tertiary: #374151;

      --color-border: #374151;
      --color-border-light: #1F2937;
    }
  }

  /* Explicit Dark Mode (class strategy) */
  .dark {
    --color-text: #F9FAFB;
    --color-text-secondary: #D1D5DB;
    --color-text-muted: #9CA3AF;

    --color-background: #111827;
    --color-background-secondary: #1F2937;
    --color-background-tertiary: #374151;

    --color-border: #374151;
    --color-border-light: #1F2937;
  }
}

/* ===== Base Styles ===== */
@layer base {
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
    font-size: 16px;
  }

  body {
    font-family: var(--font-family-base);
    color: var(--color-text);
    background-color: var(--color-background);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color var(--transition-normal),
                color var(--transition-normal);
  }

  /* Typography */
  h1 {
    @apply text-h1 font-bold;
  }

  h2 {
    @apply text-h2 font-semibold;
  }

  h3 {
    @apply text-h3 font-semibold;
  }

  a {
    @apply text-primary-600 hover:text-primary-700 transition-colors;
  }

  /* Focus Visible - Accessibility */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2;
  }

  .dark *:focus-visible {
    @apply ring-offset-gray-900;
  }
}

/* ===== Component Layer ===== */
@layer components {
  /* Button Base */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg font-semibold transition-all duration-fast;
  }

  /* Button Variants */
  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply bg-gray-100 text-gray-900 hover:bg-gray-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-danger {
    @apply bg-error-50 text-error-600 hover:bg-error-100 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-ghost {
    @apply bg-transparent text-primary-600 hover:bg-primary-50 active:scale-95;
  }

  /* Input Base */
  .input {
    @apply w-full px-4 py-2.5 rounded-lg border-2 border-gray-300 bg-white text-gray-900 font-base transition-all duration-fast;
  }

  .input:focus {
    @apply border-primary-500 ring-2 ring-primary-200;
  }

  .input:disabled {
    @apply bg-gray-50 border-gray-200 text-gray-500 cursor-not-allowed;
  }

  .dark .input {
    @apply border-gray-600 bg-gray-800 text-white;
  }

  .dark .input:focus {
    @apply ring-primary-900;
  }

  /* Label */
  .label {
    @apply block text-sm font-semibold text-gray-700 mb-2;
  }

  .dark .label {
    @apply text-gray-300;
  }

  /* Card */
  .card {
    @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm;
  }

  .card-lg {
    @apply card shadow-lg;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium;
  }

  .badge-success {
    @apply bg-success-100 text-success-700;
  }

  .badge-warning {
    @apply bg-warning-100 text-warning-700;
  }

  .badge-error {
    @apply bg-error-100 text-error-700;
  }

  .badge-info {
    @apply bg-primary-100 text-primary-700;
  }

  /* Alert */
  .alert {
    @apply p-4 rounded-lg flex gap-3 items-start;
  }

  .alert-success {
    @apply bg-success-50 border border-success-200 text-success-800;
  }

  .alert-error {
    @apply bg-error-50 border border-error-200 text-error-800;
  }

  .alert-warning {
    @apply bg-warning-50 border border-warning-200 text-warning-800;
  }

  .alert-info {
    @apply bg-primary-50 border border-primary-200 text-primary-800;
  }

  /* Loading Spinner */
  .spinner {
    @apply inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin;
  }

  /* Skeleton Loading */
  .skeleton {
    @apply bg-gray-200 dark:bg-gray-700 animate-pulse;
  }

  /* Link */
  .link {
    @apply text-primary-600 hover:text-primary-700 transition-colors cursor-pointer;
  }

  /* Screen Reader Only */
  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden clip-rect border-0;
  }

  /* Container */
  .container-base {
    @apply w-full max-w-6xl mx-auto px-6;
  }
}

/* ===== Utilities ===== */
@layer utilities {
  /* No Scrollbar */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Text Truncate */
  .truncate-line {
    @apply truncate;
  }

  .truncate-2 {
    @apply line-clamp-2;
  }

  .truncate-3 {
    @apply line-clamp-3;
  }

  /* Transition Utilities */
  .transition-fast {
    @apply transition-all duration-fast;
  }

  .transition-normal {
    @apply transition-all duration-normal;
  }

  .transition-slow {
    @apply transition-all duration-slow;
  }
}